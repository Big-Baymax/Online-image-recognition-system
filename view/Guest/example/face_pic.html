{extend name="guest@base/user"/}{block name="title"}在线体验--照片人脸标记{/block}{block name="navbar-four"}<li class="dropdown active">    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">在线体验 <span class="caret"></span></a>    <ul class="dropdown-menu">        <li><a href="_ROOT_/user/interface/example/qrcode">二维码识别</a></li>        <li><a href="_ROOT_/user/interface/example/text">图片转文本</a></li>        <li role="separator" class="divider"></li>        <li><a href="_ROOT_/user/interface/example/color_video">颜色识别</a></li>        <li><a href="_ROOT_/user/interface/example/face_video">人脸识别</a></li>        <li><a href="_ROOT_/user/interface/example/fast">特征值提取</a></li>    </ul></li>{/block}{block name="css"}<style>    video {        width: 100%;        height: 100%    }    .canvas-draw{        position: absolute;        margin: auto;        height: 100%;        width: 100%;        left: 0;        top: 0;        right: 0;        bottom: 0;    }    canvas{        width: 100%;        height: 100%;    }    .face-box{        position: relative;        height: 280px;        padding: 0;        margin: 0;    }    #photo:hover .rect {        opacity: .75;        transition: opacity .75s ease-out;    }    .rect:hover * {        opacity: 1;    }    .rect {        border-radius: 2px;        border: 3px solid white;        box-shadow: 0 16px 28px 0 rgba(0, 0, 0, 0.3);        cursor: pointer;        left: -1000px;        opacity: 0;        position: absolute;        top: -1000px;    }    .arrow {        border-bottom: 10px solid white;        border-left: 10px solid transparent;        border-right: 10px solid transparent;        height: 0;        width: 0;        position: absolute;        left: 50%;        margin-left: -5px;        bottom: -12px;        opacity: 0;    }    input {        border: 0px;        bottom: -42px;        color: #a64ceb;        font-size: 15px;        height: 30px;        left: 50%;        margin-left: -90px;        opacity: 0;        outline: none;        position: absolute;        text-align: center;        width: 180px;        transition: opacity .35s ease-out;    }</style>{/block}{block name="contont"}<!-- Begin page content --><div class="container">    <div class="row container-box">        <ul class="example-show" style="padding: 0px">            <li class="active" id="example-2" data="nav-2">                <div class="col-md-12 example-box">                    <div class="col-md-12 col-sm-12 example-img-box">                        <div class="col-md-6 face-box">                            <div class="canvas-draw">                                <img src="_IMG_/faces.jpg" class="example-img">                            </div>                            <span class="img-title">原图</span>                        </div>                        <div class="col-md-6 face-box">                            <div class="canvas-draw">                               <span id="photo"><img id="face-img" src="_IMG_/faces.jpg" class="example-img"></span>                               <span class="img-title">效果图</span>                            </div>                        </div>                    </div>                    <div class="col-md-12 example-upload">                        <button type="button" class="btn btn-lg btn-orange example-btn">本地上传</button>                        <input type="file" accept="image/*" style="display: none" for="code">                    </div>                </div>            </li>        </ul>        <div class="col-md-12 sideGuide text-center">            <ul class="center-block">                <li><a href="face_video" class="example-nav">录像人脸识别</a></li>                <li><a href="face_pic" class="example-nav active">照片人脸标记</a></li>            </ul>        </div>    </div></div>{/block}{block name="linkjs"}<script src="_ROOT_/faces?key=4e6df7ac7ebee8ae5e35aee876ddd2a5"></script><script src="_JS_/im/training/build/data/face-min.js"></script><script src="_JS_/im/training/src/alignment/training/Landmarks.js"></script><script src="_JS_/im/training/src/alignment/training/Regressor.js"></script><script src="_JS_/im/dat-gui/dat.gui.min.js"></script>{/block}{block name="js"}<script>    window.onload = function() {        var img = document.getElementById('face-img');        var tracker = new tracking.ObjectTracker('face');        tracking.track(img, tracker);        tracker.on('track', function(event) {            event.data.forEach(function(rect) {                plotRectangle(rect.x, rect.y, rect.width, rect.height);            });        });        var friends = [ '杰克逊', '哈雷汉姆', '奥巴马' ];        var plotRectangle = function(x, y, w, h) {            var rect = document.createElement('div');            var arrow = document.createElement('div');            var input = document.createElement('input');            input.value = friends.pop();            rect.onclick = function name() {                input.select();            };            arrow.classList.add('arrow');            rect.classList.add('rect');            rect.appendChild(input);            rect.appendChild(arrow);            document.getElementById('photo').appendChild(rect);            rect.style.width = w + 'px';            rect.style.height = h + 'px';            rect.style.left = (img.offsetLeft + x) + 'px';            rect.style.top = (img.offsetTop + y) + 'px';        };    };</script>{/block}