{extend name="guest@base/user"/}{block name="title"}在线体验{/block}{block name="navbar-four"}<li class="dropdown active">    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">在线体验 <span class="caret"></span></a>    <ul class="dropdown-menu">        <li><a href="_ROOT_/user/interface/example/qrcode">二维码识别</a></li>        <li><a href="_ROOT_/user/interface/example/text">图片转文本</a></li>        <li role="separator" class="divider"></li>        <li><a href="_ROOT_/user/interface/example/color_video">颜色识别</a></li>        <li><a href="_ROOT_/user/interface/example/face_video">人脸识别</a></li>        <li><a href="_ROOT_/user/interface/example/fast">特征值提取</a></li>    </ul></li>{/block}{block name="css"}<style>    video {        width: 100%;        height: 100%        /*position: absolute;*/        /*z-index: 999;*/        /*height: 320px;*/        /*width: 420px;*/    }    .canvas-draw{        position: absolute;        margin: auto;        height: 240px;        width: 320px;        left: 0;        top: 0;        right: 0;        bottom: 0;        /**/        /*!*bottom: 0;*!*/        /*left: 0;*/        /*!*right: 0;*!*/    }    canvas{        width: 100%;        height: 100%;    }    .face-box{        position: relative;        height: 260px;        padding: 0;        margin: 0;    }</style>{/block}{block name="contont"}<!-- Begin page content --><div class="container">    <div class="row container-box">        <ul class="example-show" style="padding: 0px">            <li class="active" id="example-3" data="nav-3">                <div class="col-md-12 example-box">                    <div class="col-md-6 example-img-box">                        <img src="_IMG_/demo/chinese_red.jpg" class="example-img" id="font">                    </div>                    <div class="col-md-6 example-img-box">                        <div class="example-result">                            <h4 class="title">识别结果</h4>                            <p class="text" id="font-text"><i class="fa fa-spinner fa-pulse fa-5x"></i>                                <br>正在识别，请稍等……</p>                        </div>                    </div>                    <div class="col-md-12 example-upload">                        <button type="button" class="btn btn-lg btn-orange example-btn">本地上传</button>                        <input id="file" type="file" accept="image/*" style="display: none" for="font">                        <div class="row" style="font-size: 18px;padding: 15px">                            <label class="radio-inline">                                <input type="radio" name="type" id="type1" value="chi_sim" checked="checked"> 中文识别                            </label>                            <label class="radio-inline">                                <input type="radio" name="type" id="type2" value="eng"> 英文识别                            </label>                        </div>                    </div>                </div>            </li>        </ul>        <div class="col-md-12 sideGuide text-center">            <ul class="center-block">                <li><a href="qrcode" class="example-nav">二维码识别</a></li>                <li><a href="face_video" class="example-nav">人脸识别</a></li>                <li><a href="color_video" class="example-nav">颜色识别</a></li>                <li><a href="text" class="example-nav active">图片转文本</a></li>                <li><a href="fast" class="example-nav">特征值提取</a></li>            </ul>        </div>    </div></div>{/block}{block name="linkjs"}<script src="_ROOT_/text?key=57fc631cc1d38a5c77ccf70f98c7bebd" type="text/javascript" charset="utf-8"></script>{/block}{block name="js"}<script>    //eng   chi_sim    function font_discern(url,obj,type) {        $('.example-btn').attr('disabled','disabled');        Tesseract.create({            workerPath: 'http://{$Think.server.SERVER_NAME}_JS_/im/tesseract/worker.js',            langPath: 'http://{$Think.server.SERVER_NAME}_JS_/im/tesseract/langPath/',            corePath: 'http://{$Think.server.SERVER_NAME}_JS_/im/tesseract/index.js',        }).recognize(url, {            lang: type,            tessedit_char_blacklist: 'e'        }).then(function(result){            $('.example-btn').removeAttrs('disabled');            obj.text(result.text);            console.log(result)        });    }    //获取文件路径方法兼容    function getObjectURL(file) {        var url = null ;        if (window.createObjectURL!=undefined) { // basic            url = window.createObjectURL(file) ;        } else if (window.URL!=undefined) { // mozilla(firefox)            url = window.URL.createObjectURL(file) ;        } else if (window.webkitURL!=undefined) { // webkit or chrome            url = window.webkitURL.createObjectURL(file) ;        }        return url ;    }    $(function () {        font_discern('_IMG_/demo/chinese_red.jpg',$('#font-text'),'chi_sim');        $('.example-btn').on('click',function () {            var input = $('#file');            input.click();        });        $('#file').change(function () {            var id = $('#file').attr('for');            $('#'+id+'-text').html('<i class="fa fa-spinner fa-pulse fa-5x"></i><br>正在识别，请稍等……');            var objUrl = getObjectURL(this.files[0]);            $('#'+id).attr('src',objUrl);            var type = $("input[name='type']:checked").val();            font_discern(objUrl,$('#'+id+'-text'),type);            $('#file').val('');        });    })</script>{/block}