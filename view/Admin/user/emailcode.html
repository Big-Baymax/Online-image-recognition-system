{extend name="base/tablebase"/}{block name="title"}邮箱验证码发送记录{/block}{block name="table"}<!-- Example Card View --><div class="example-wrap">    <div class="example">        <div class="btn-group hidden-xs" id="exampleToolbar" role="group">            <button type="button" class="btn btn-outline btn-default filter" data-id="1">                天            </button>            <button type="button" class="btn btn-outline btn-default filter" data-id="2">                周            </button>            <button type="button" class="btn btn-outline btn-default filter" data-id="3">                月            </button>            <button type="button" class="btn btn-outline btn-default filter active" data-id="4">                全部            </button>        </div>        <table id="table" data-toggle="table" data-card-view="true" data-mobile-responsive="true" data-show-export="true">            <thead>            <tr>                <th data-field="uid" data-sortable="true">UID</th>                <th data-field="code" data-sortable="true">验证码</th>                <th data-field="email" data-sortable="true">邮箱</th>                <th data-field="result" data-formatter="resultFormatter" data-align="center" data-halign="center">结果</th>                <th data-field="time" data-sortable="true">发送时间</th>            </tr>            </thead>        </table>    </div></div><!-- End Example Card View -->{/block}{block name="model"}{/block}{block name="linkjs"}{/block}{block name="js"}<script>    $('#table').bootstrapTable({        pagination: true,        sidePagination: 'server',        url:'_URL_/admin/emailcode_list',        showRefresh: true,        showToggle: true,        showColumns: true,        method:'post',        dataField:'data',//指定        pageSize: 10,        pageNumber:1,//开始的时候是第几页        pageList:[5,10, 15 ,25,'ALL'],        queryParamsType:'',        sortOrder:"desc",        // 自定义搜索参数        queryParams: formfilter,        toolbar: "#exampleToolbar",        iconSize: "outline",        icons: {            refresh: "glyphicon-repeat",            toggle: "glyphicon-list-alt",            columns: "glyphicon-list",            export: 'glyphicon glyphicon-export'        }    });    //刷新时候提交    $(".filter").click(function () {        $(".filter").removeClass("active");        $(this).addClass("active");        //console.log($('#table').bootstrapTable('getOptions'));        //var options = $('#table').bootstrapTable('getOptions');        //重置pageSize为1        $('#table').bootstrapTable('selectPage',1);//        $('#table').bootstrapTable('refresh', {//            query: {////            'pageSize':options['pageSize'],////            'pageNumber':options['pageNumber'],////            'searchText':options['searchText'],////            'sortName':options['sortName'],////            'sortOrder':options['sortOrder'],//            'time':$(this).attr('data-id')//        }});    })    function resultFormatter(e) {        if(e == 1){            return '<span class="label label-primary">成功</span>'        }else{            return '<span class="label label-danger">失败</span>'        }    }    //修改上传参数    function formfilter(params) {        var data_id = $(".filter").filter('.active').attr('data-id');        params["time"]=data_id;        return params;    }</script>{/block}