{extend name="base/tablebase"/}{block name="title"}用户管理{/block} {block name="table"}<!-- Example Card View --><div class="example-wrap">    <div class="example">        <div class="btn-group hidden-xs" id="exampleToolbar" role="group">            <button type="button" class="btn btn-outline btn-default" id="add" data-toggle="tooltip" data-animation="false" data-original-title="添加">                <i class="glyphicon glyphicon-plus" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="defriend" data-toggle="tooltip" data-animation="false" data-original-title="禁用">                <i class="glyphicon glyphicon-ban-circle" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="del" data-toggle="tooltip" data-animation="false" data-original-title="删除">                <i class="glyphicon glyphicon-trash" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="reset" data-toggle="tooltip" data-animation="false" data-original-title="重置">                <i class="glyphicon glyphicon-repeat" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="edit" data-toggle="tooltip" data-animation="false" data-original-title="修改">                <i class="glyphicon glyphicon-edit" aria-hidden="true"></i>            </button>        </div>        <table id="table" data-toggle="table" data-card-view="true" data-mobile-responsive="true" data-click-to-select="true" data-unique-id="uid" data-show-export="true">            <thead>            <tr>                <th data-field="state" data-checkbox="true"></th>                <th data-field="uid">UID</th>                <th data-field="name" >昵称</th>                <th data-field="email">邮箱</th>                <th data-field="integral" data-sortable="true">积分</th>                <th data-field="status" data-formatter="statusFormatter" data-align="center" data-halign="center" data-sortable="true">状态</th>                <th data-field="login_count">登陆次数</th>                <th data-field="time" data-sortable="true">注册时间</th>                <th data-formatter="showloginFormatter" data-align="center" data-halign="center">登录记录</th>                <!--<th data-formatter="showcheckFormatter" data-align="center" data-halign="center">授权记录</th>-->            </tr>            </thead>        </table>    </div></div><!-- End Example Card View -->{/block}{block name="model"}<div class="modal fade add-model" tabindex="-1" role="dialog">    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span>                </button>                <h4 class="modal-title">添加</h4>            </div>            <div class="modal-body">                <form method="post" id="add-form">                    <div class="form-group">                        <label>昵称</label>                        <input type="text" id="B-name" name="name" placeholder="请输入昵称" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>Email</label>                        <input type="email" id="B-email" name="email" placeholder="请输入您的Email" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>积分</label>                        <input type="number" id="B-integral" name="integral" placeholder="请输入积分" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>默认密码为：<span class="label label-primary">198198198</span>，添加后联系用户修改！</label>                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                <button id="add-confirm" type="button" class="btn btn-primary">确定</button>            </div>        </div>    </div></div><div class="modal fade edit-model" tabindex="-1" role="dialog">    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span>                </button>                <h4 class="modal-title" id="title">修改</h4>            </div>            <div class="modal-body">                <form method="post" id="edit-form">                    <div class="form-group">                        <label>昵称</label>                        <input type="text" id="B-name" name="name" placeholder="请输入昵称" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>Email</label>                        <input type="email" id="B-email" name="email" placeholder="请输入您的Email" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>积分</label>                        <input type="number" id="B-integral" name="integral" placeholder="请输入积分" class="form-control" required="required">                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                <button id="edit-confirm" type="button" class="btn btn-primary">确定</button>            </div>        </div>    </div></div>{/block}{block name="linkjs"}{/block}{block name="js"}<script>        $('#table').bootstrapTable({            search: true,            pagination: true,            url: '_URL_/admin/user_list',            showRefresh: true,            showToggle: true,            showColumns: true,            method: 'post',            pageSize: 10,            pageNumber: 1,//开始的时候是第几页            pageList: [5, 10, 15, 25,'ALL'],            queryParamsType: '',            sidePagination: "server",            dataField:'data',//指定            exportDataType: 'all',            exportTypes: ['json', 'xml', 'csv', 'txt', 'sql', 'excel'],            exportOptions: {fileName: '导出'},            toolbar: "#exampleToolbar",            iconSize: "outline",            sortOrder:"desc",            icons: {                refresh: "glyphicon-repeat",                toggle: "glyphicon-list-alt",                columns: "glyphicon-list",                export: 'glyphicon glyphicon-export'            }        });        function statusFormatter(value, row, index) {            if (value == 1) {                return '<a class="label label-primary defriend" href="#" data_id="'+row.uid+'">已激活</a>'            } else {                return '<a class="label label-danger defriend" href="#"  data_id="'+row.uid+'">已禁用</a>'            }        }        function showloginFormatter(value, row, index) {            return '<a class="" href="user/loginlist/' + row.uid + '">查看</a>'        }        function showcheckFormatter(value, row, index) {            return '<a class="" href="user/checklist/' + row.uid + '">查看</a>'        }        $(document).ready(function () {        // Tooltip        $('[data-toggle="tooltip"]').tooltip({                trigger: 'hover'        });         user_operate($('#table'),'user/add','user/del','user/edit/','user/reset','user/defriend');       });</script>{/block}