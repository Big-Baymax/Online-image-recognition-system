{extend name="base/tablebase"/}{block name="title"}通知管理（面向用户ID为零表示所有用户）{/block}{block name="table"}<!-- Example Card View --><div class="example-wrap">    <div class="example">        <div class="btn-group hidden-xs" id="exampleToolbar" role="group">            <button type="button" class="btn btn-outline btn-default" id="add" data-toggle="tooltip" data-animation="false" data-original-title="发布">                <i class="glyphicon glyphicon-plus" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="del" data-toggle="tooltip" data-animation="false" data-original-title="删除">                <i class="glyphicon glyphicon-trash" aria-hidden="true"></i>            </button>            <button type="button" class="btn btn-outline btn-default" id="edit" data-toggle="tooltip" data-animation="false" data-original-title="修改">                <i class="glyphicon glyphicon-edit" aria-hidden="true"></i>            </button>        </div>        <table id="table" data-toggle="table" data-card-view="true" data-mobile-responsive="true" data-click-to-select="true" data-unique-id="uid" data-show-export="true">            <thead>            <tr>                <th data-field="state" data-checkbox="true"></th>                <th data-field="uid">UID</th>                <th data-field="user_id" data-formatter="UserFormatter">面向用户</th>                <th data-field="title" >标题</th>                <th data-field="content">内容</th>                <th data-field="time" data-sortable="true">发布时间</th>                <th data-field="type" data-formatter="typeFormatter">类型</th>                <th data-field="view_count" data-sortable="true">查看人数</th>            </tr>            </thead>        </table>    </div></div><!-- End Example Card View -->{/block}{block name="model"}<div class="modal fade add-model" tabindex="-1" role="dialog">    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span>                </button>                <h4 class="modal-title">添加</h4>            </div>            <div class="modal-body">                <form method="post" id="add-form">                    <div class="form-group">                        <label>标题</label>                        <input type="text" id="B-title" name="title" placeholder="请输入通知标题" class="form-control" required="required">                    </div>                    <div class="form-group">                        <label>内容</label>                        <textarea class="form-control" id="B-content" name="content"  placeholder="请输入通知内容" required></textarea>                    </div>                    <div class="form-group">                        <label>用户选择</label>                        <select class="form-control" id="B-user_id" name="user_id">                            <option value="0">全部</option>                            {volist name="list" id="data" empty="暂时没有数据"}                            <option value="{$data.uid}">{$data.name}({$data.email})</option>                            {/volist}                        </select>                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                <button id="add-confirm" type="button" class="btn btn-primary">确定</button>            </div>        </div>    </div></div><div class="modal fade edit-model" tabindex="-1" role="dialog">    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">&times;</span>                </button>                <h4 class="modal-title" id="title">修改</h4>            </div>            <div class="modal-body">                <form method="post" id="edit-form">                    <div class="form-group">                    <label>标题</label>                    <input type="text" id="B-title" name="title" placeholder="请输入通知标题" class="form-control" required="required">                </div>                    <div class="form-group">                        <label>内容</label>                        <textarea class="form-control" id="B-content" name="content" placeholder="请输入通知内容" required></textarea>                    </div>                    <div class="form-group">                        <label>用户选择</label>                        <select class="form-control" id="B-user_id" name="user_id">                            <option value="0">全部</option>                            {volist name="list" id="data" empty="暂时没有数据"}                            <option value="{$data.uid}">{$data.name}({$data.email})</option>                            {/volist}                        </select>                    </div>                </form>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                <button id="edit-confirm" type="button" class="btn btn-primary">确定</button>            </div>        </div>    </div></div>{/block}{block name="linkjs"}{/block}{block name="js"}<script>    $('#table').bootstrapTable({        search: true,        pagination: true,        url: 'news_list',        showRefresh: true,        showToggle: true,        showColumns: true,        method: 'post',        pageSize: 10,        pageNumber: 1,//开始的时候是第几页        pageList: [5, 10, 15, 25,'ALL'],        queryParamsType: '',        sidePagination: "server",        dataField:'data',//指定        exportDataType: 'selected',        exportTypes: ['json', 'xml', 'csv', 'txt', 'sql', 'excel'],        exportOptions: {fileName: '导出'},        toolbar: "#exampleToolbar",        iconSize: "outline",        sortOrder:"desc",        icons: {            refresh: "glyphicon-repeat",            toggle: "glyphicon-list-alt",            columns: "glyphicon-list",            export: 'glyphicon glyphicon-export'        }    });    function typeFormatter(value, row, index) {        if (value == 1) {            return '<a class="label label-primary" href="#">管理员</a>'        } else {            return '<a class="label label-danger" href="#">事务</a>'        }    }    function UserFormatter(value, row, index) {        if (value == 0) {            return '<a class="label label-primary" href="#">全部</a>'        } else {            return value;        }    }    $(document).ready(function () {        // Tooltip        $('[data-toggle="tooltip"]').tooltip({            trigger: 'hover'        });        user_operate($('#table'),'news_add','news_del','news_edit/');    });</script>{/block}